## ğŸ’¨ ì¸í„°ë™í‹°ë¸Œ íš¨ê³¼ ë° ìŠ¤í† ë¦¬ ê°•í™”

ê¸°ì¡´ì˜ `triggerEffect` ê¸°ëŠ¥ì„ ì™„ì „íˆ êµì²´í•˜ê³ , íŠ¹íˆ ìš”ì²­í•˜ì‹  **'ì•ˆë°©êµ¬ íš¨ê³¼'ì— ìŠ¤í† ë¦¬ë¥¼ ì…íŒ ì¸í„°ë™ì…˜**ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

ì´ì œ ì„ ë¬¼ ìƒì(`div.toy`)ë¥¼ í´ë¦­í•˜ë©´ ì„ íƒ ìƒì(`choiceBox`)ê°€ ë‚˜ì˜¤ê³ , 'ì•ˆë°©êµ¬ íš¨ê³¼'ë¥¼ ì„ íƒí•˜ë©´ í™”ë©´ì— \*\*NPC (ì•ˆë°©êµ¬ ì¸ê°„)\*\*ê°€ ë‚˜íƒ€ë‚˜ ëŒ€í™”ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.

### ğŸ› ï¸ ë³€ê²½ëœ HTML/JavaScript ì½”ë“œ

ì•„ë˜ ì½”ë“œë¥¼ ê¸°ì¡´ ì½”ë“œì— ë®ì–´ì“°ì‹œë©´ ë©ë‹ˆë‹¤.

-----

```html
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìŠ¤í‚¨í”„ë™ì³ - ë¯¸ë˜í˜• ì¸í„°ë™í‹°ë¸Œ ì›¹ì‚¬ì´íŠ¸</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
/* =========================================================================
 * 1. CSS Variables & Base Styles (ìƒëµ - ì´ì „ ì½”ë“œì™€ ë™ì¼)
 * ========================================================================= */
:root{
  --brand-color: #0077FF; 
  --bg-color: #F8F9FA; 
  --text-color: #1A1A1A; 
  --light-text: #6C757D; 
  --card-bg: #FFFFFF;
  --card-radius: 25px;
  --header-height-large: 90px;
  --header-height-small: 60px;
  --transition-speed: 0.4s;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{
  background:var(--bg-color);
  color:var(--text-color);
  overflow-x:hidden;
  line-height:1.6;
  scroll-behavior:smooth;
}

/* 2. Header, 3. Hero, 4. General Section, 5. Products, 6. News, 7. Footer (ìƒëµ - ì´ì „ ì½”ë“œì™€ ë™ì¼) */
header{
  width:100%;height:var(--header-height-large);background:rgba(255,255,255,0.98);backdrop-filter:blur(15px);display:flex;align-items:center;justify-content:space-between;padding:0 5vw;position:fixed;top:0;left:0;z-index:1000;box-shadow:0 4px 20px rgba(0,0,0,0.08);transition:var(--transition-speed) ease-in-out;
}
header.scrolled{
  height:var(--header-height-small);padding:0 3vw;
}
header .logo img{
  height:40px;transition:var(--transition-speed) ease-in-out;
}
header.scrolled .logo img{
  height:30px;
}
header nav a{
  color:var(--text-color);text-decoration:none;margin-left:35px;font-weight:600;font-size:1rem;position:relative;transition:color var(--transition-speed);
}
header nav a::after{
  content:'';position:absolute;bottom:-5px;left:0;width:0;height:3px;background:var(--brand-color);transition:width var(--transition-speed);
}
header nav a:hover{
  color:var(--brand-color);
}
header nav a:hover::after{
  width:100%;
}
.hero{
  width:100%;height:100vh;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;text-align:center;padding-top:var(--header-height-large);
}
.hero-bg{
  position:absolute;top:0;left:0;width:100%;height:120%;background:url('https://images.unsplash.com/photo-1612832021035-0d66711c5ee5?auto=format&fit=crop&w=2500&q=80') no-repeat center/cover;z-index:1;transform:translateY(0);transition:transform 0.1s linear;
}
.hero .hero-text{
  position:relative;z-index:10;background:rgba(255,255,255,0.95);padding:80px;border-radius:var(--card-radius);max-width:900px;box-shadow:0 25px 50px rgba(0,0,0,0.25);animation:fadeInUp 1s ease-out;
}
.hero h1{
  font-size:4.5rem;font-weight:800;color:var(--brand-color);margin-bottom:15px;letter-spacing:-2px;
}
.hero p{
  font-size:1.4rem;color:var(--light-text);margin-bottom:10px;
}
.hero .cta{
  font-size:1.1rem;font-weight:700;color:var(--text-color);transition:color 0.3s;
}
.hero .cta:hover{
  color:var(--brand-color);
}
@keyframes fadeInUp{
  0%{opacity:0;transform:translateY(20px);}100%{opacity:1;transform:translateY(0);}
}
section{
  padding:120px 5vw;position:relative;
}
section h2{
  text-align:center;font-size:3.5rem;color:var(--text-color);margin-bottom:80px;font-weight:700;position:relative;
}
section h2::after{
  content:'';position:absolute;bottom:-15px;left:50%;transform:translateX(-50%);width:100px;height:6px;background:var(--brand-color);border-radius:3px;
}
.products{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:60px;
}
.card{
  background:var(--card-bg);border-radius:var(--card-radius);box-shadow:0 15px 40px rgba(0,0,0,0.1);overflow:hidden;transform-style:preserve-3d;transition:transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);will-change:transform;
}
.card-inner{
  transform-style:preserve-3d;transition:var(--transition-speed);
}
.card img{
  width:100%;height:240px;object-fit:cover;
}
.card .content{
  padding:30px;transform:translateZ(10px);
}
.card .content h3{
  font-size:1.8rem;margin-bottom:10px;font-weight:700;color:var(--brand-color);
}
.card .content p{
  font-size:1.05rem;color:var(--light-text);
}
.animate-on-scroll{
  opacity:0;transform:translateY(50px);transition:opacity 0.8s ease-out, transform 0.8s ease-out;
}
.animate-on-scroll.in-view{
  opacity:1;transform:translateY(0);
}
.news{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:40px;
}
.news-card{
  background:var(--card-bg);border-radius:var(--card-radius);overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.08);transition:var(--transition-speed);border:1px solid #e0e0e0;
}
.news-card:hover{
  box-shadow:0 20px 45px rgba(0,0,0,0.15);transform:translateY(-5px);
}
.news-card img{
  width:100%;height:220px;object-fit:cover;
}
.news-card .content{
  padding:25px;
}
.news-card .content h4{
  font-size:1.5rem;margin-bottom:8px;font-weight:700;color:var(--text-color);
}
.news-card .content p{
  font-size:0.95rem;color:var(--light-text);
}
footer{
  background:#111;color:white;padding:60px;display:flex;flex-direction:column;align-items:center;text-align:center;
}
footer p{
  margin-top:20px;font-size:0.9rem;color:#aaa;
}

/* =========================================================================
 * 8. Gimmick (Interactive Toy) Styles - ìˆ˜ì •/ì¶”ê°€
 * ========================================================================= */
.toy{
  width:70px;height:70px;position:fixed;bottom:40px;right:40px;background:url('https://upload.wikimedia.org/wikipedia/commons/4/45/Emoji_u1f381.svg') no-repeat center/contain;cursor:pointer;z-index:99999;animation:float 2s ease-in-out infinite, pulse 1.5s infinite;border-radius:50%;box-shadow:0 0 0 0 rgba(0, 119, 255, 0.7);transition:background-color 0.3s;
}
@keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-12px);}}
@keyframes pulse {0%{box-shadow:0 0 0 0 rgba(0, 119, 255, 0.5);}70%{box-shadow:0 0 0 20px rgba(0, 119, 255, 0);}100%{box-shadow:0 0 0 0 rgba(0, 119, 255, 0);}}

.choiceBox{
  position:fixed;bottom:130px;right:20px;background:rgba(26, 26, 26, 0.98);color:white;padding:25px 30px;border-radius:20px;z-index:3000;text-align:center;font-size:1.1rem;box-shadow:0 15px 40px rgba(0,0,0,0.4);animation:fadeIn 0.3s ease-out;
}
@keyframes fadeIn{0%{opacity:0;transform:translateY(10px);}100%{opacity:1;transform:translateY(0);}}
button{
  padding:12px 25px;border:none;border-radius:12px;background:var(--brand-color);color:white;font-weight:600;cursor:pointer;font-size:0.95rem;transition:0.3s;margin:8px;
}
button:hover{background:#0055c7;}

.fx-splatter{
  position:fixed;width:120px;height:120px;pointer-events:none;background-repeat:no-repeat;background-position:center;background-size:contain;z-index:2500;opacity:0;transition:opacity 0.5s ease-out;
}

/* --- NPC (Non-Player Character) ìŠ¤íƒ€ì¼ ì¶”ê°€ --- */
.npc-container {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    z-index: 5000;
    display: none; /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
    flex-direction: column;
    align-items: center;
}

.npc-container.active {
    display: flex;
}

.npc-character {
    width: 200px;
    height: 300px;
    background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/User_Icon.svg/1200px-User_Icon.svg.png') no-repeat center bottom/contain; /* ì¼ë°˜ì ì¸ ì‚¬ëŒ ëª¨ì–‘ ì•„ì´ì½˜ */
    cursor: pointer;
    transition: transform 0.2s ease-out;
}
.npc-character:hover {
    transform: translateY(-5px);
}

.npc-speech-bubble {
    background: white;
    color: var(--text-color);
    padding: 15px 25px;
    border-radius: 20px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    margin-bottom: 20px;
    max-width: 400px;
    position: relative;
    font-size: 1.1rem;
    font-weight: 500;
}
.npc-speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-top: 15px solid white;
}

/* --- ë°©êµ¬ íš¨ê³¼ ìŠ¤íƒ€ì¼ ì¶”ê°€ --- */
.fart-cloud {
    position: fixed;
    width: 150px;
    height: 150px;
    background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Green_circle.svg/1200px-Green_circle.svg.png') no-repeat center/contain;
    opacity: 0;
    transition: all 0.5s ease-out;
    pointer-events: none;
    z-index: 5001;
}
.fart-cloud.active {
    opacity: 0.7;
    transform: translateY(-200px) scale(1.5);
}

/* 9. Responsive Design (ìƒëµ - ì´ì „ ì½”ë“œì™€ ë™ì¼) */
@media(max-width:1024px){
  .hero h1{font-size:3.5rem;}
  .hero p{font-size:1.2rem;}
  section h2{font-size:2.8rem;}
}
@media(max-width:768px){
  header{padding:0 20px;}
  header nav{display:none;}
  section{padding:80px 20px;}
  .hero .hero-text{padding:50px 30px;}
  .hero h1{font-size:2.5rem;}
  .products, .news{grid-template-columns:1fr;}
  .toy{bottom:20px;right:20px;}
  .choiceBox{bottom:100px;right:10px;left:10px;transform:none;font-size:1rem;}
  button{display:block;width:100%;margin:5px 0;}
}
</style>
</head>
<body>

<header>
  <div class="logo"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Logo_mockup_example.svg/1200px-Logo_mockup_example.svg.png" alt="ìŠ¤í‚¨í”„ë™ì³ ë¡œê³ "></div>
  <nav>
    <a href="#hero">í™ˆ</a>
    <a href="#products">ì œí’ˆ</a>
    <a href="#news">ë‰´ìŠ¤</a>
    <a href="#contact">ì—°ë½ì²˜</a>
  </nav>
</header>

<section class="hero" id="hero">
  <div class="hero-bg" id="hero-bg"></div>
  <div class="hero-text">
    <h1>ìŠ¤í‚¨í”„ë™ì³: í˜ì‹ ì˜ ê²½ê³„ë¥¼ ë„˜ì–´</h1>
    <p>ë¯¸ë˜ ê¸°ìˆ ê³¼ ì˜ˆìˆ ì ì¸ ë””ìì¸ì˜ ì™„ë²½í•œ ì¡°í™”, ì§€ê¸ˆ ê²½í—˜í•˜ì„¸ìš”.</p>
    <p class="cta">ğŸ ì˜¤ë¥¸ìª½ í•˜ë‹¨ì˜ ì„ ë¬¼ ì•„ì´ì½˜ì„ í´ë¦­í•´ë³´ì„¸ìš”!</p>
  </div>
</section>

<section id="products">
  <h2>ì£¼ìš” ì œí’ˆ ë° ì†”ë£¨ì…˜</h2>
  <div class="products">
    <div class="card animate-on-scroll" data-tilt>
      <div class="card-inner">
        <img src="https://images.unsplash.com/photo-1606813902897-49ab9b52d4b4?auto=format&fit=crop&w=800&q=80">
        <div class="content">
          <h3>ë„¤ì˜¤-í…Œí¬ A.I.</h3>
          <p>ê³ ë„ì˜ ì˜ˆì¸¡ ì•Œê³ ë¦¬ì¦˜ì´ ì ìš©ëœ ì°¨ì„¸ëŒ€ í”„ë¦¬ë¯¸ì—„ ì†”ë£¨ì…˜. ì‹œì¥ì˜ íë¦„ì„ ì„ ë„í•©ë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>
    <div class="card animate-on-scroll" data-tilt>
      <div class="card-inner">
        <img src="https://images.unsplash.com/photo-1574180045827-681f8a1a9622?auto=format&fit=crop&w=800&q=80">
        <div class="content">
          <h3>ì œë¡œ-ë””ìì¸ ì»¨ì…‰</h3>
          <p>ë¯¸ë‹ˆë©€ë¦¬ì¦˜ê³¼ ê°•ë ¥í•œ ì„±ëŠ¥ì„ ê²°í•©í•œ ì œí’ˆ. ì‚¬ìš©ì ê²½í—˜ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>
    <div class="card animate-on-scroll" data-tilt>
      <div class="card-inner">
        <img src="https://images.unsplash.com/photo-1581291519195-ef11498d1cfb?auto=format&fit=crop&w=800&q=80">
        <div class="content">
          <h3>ìš¸íŠ¸ë¼-ë§í¬ í”Œë«í¼</h3>
          <p>ëª¨ë“  ë””ë°”ì´ìŠ¤ë¥¼ ì™„ë²½í•˜ê²Œ ì—°ê²°í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ í”Œë«í¼. ë‹¹ì‹ ì˜ ì‚¶ì„ í†µí•©í•©ë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="news">
  <h2>ìŠ¤í‚¨í”„ë™ì³ ìµœì‹  ë™í–¥</h2>
  <div class="news">
    <div class="news-card animate-on-scroll">
      <img src="https://images.unsplash.com/photo-1593642532973-d31b6557fa68?auto=format&fit=crop&w=800&q=80">
      <div class="content">
        <h4>ê¸€ë¡œë²Œ ë§ˆì¼“ ì±Œë¦°ì§€ ì„±ê³µ</h4>
        <p>ì‹ ê·œ ì‹œì¥ ì§„ì¶œ í›„ 1ë¶„ê¸° ë§Œì— ê´„ëª©í•  ë§Œí•œ ì„±ê³¼ ë‹¬ì„±. ì„¸ê³„ì ì¸ ì˜í–¥ë ¥ì„ í™•ëŒ€í•©ë‹ˆë‹¤.</p>
      </div>
    </div>
    <div class="news-card animate-on-scroll">
      <img src="https://images.unsplash.com/photo-1593642632823-8f785ba67e45?auto=format&fit=crop&w=800&q=80">
      <div class="content">
        <h4>R&D ì„¼í„°, ë¯¸ë˜ ê¸°ìˆ  ê³µê°œ</h4>
        <p>ì–‘ì ì»´í“¨íŒ… ê¸°ë°˜ì˜ ìƒˆë¡œìš´ ì—°êµ¬ ê²°ê³¼ ë°œí‘œ. ê¸°ìˆ  ê°œë°œì— ë°•ì°¨ë¥¼ ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
      </div>
    </div>
    <div class="news-card animate-on-scroll">
      <img src="https://images.unsplash.com/photo-1557804506-669a67965ba0?auto=format&fit=crop&w=800&q=80">
      <div class="content">
        <h4>ì§€ì† ê°€ëŠ¥í•œ ë¯¸ë˜ë¥¼ ìœ„í•œ ì•½ì†</h4>
        <p>ì¹œí™˜ê²½ ê³µì • ë„ì… ë° ESG ê²½ì˜ ê°•í™”ë¥¼ í†µí•´ ì‚¬íšŒì  ì±…ì„ì„ ë‹¤í•˜ê² ìŠµë‹ˆë‹¤.</p>
      </div>
    </div>
  </div>
</section>

<footer id="contact">
  <p>ëŒ€í‘œ: ìµœíš¨ì¤€ | ì´ë©”ì¼: contact@skinfracture.com</p>
  <p>Â© 2025 Skin Fracture | All Rights Reserved. | Made with modern web technology.</p>
</footer>

<div class="toy" id="toy"></div>
<div class="npc-container" id="npcContainer">
    <div class="npc-speech-bubble" id="npcSpeech"></div>
    <div class="npc-character" id="npcCharacter"></div>
</div>
<div class="fart-cloud" id="fartCloud"></div>

<script>
// =========================================================================
// JavaScript: Enhanced Interactivity
// =========================================================================

document.addEventListener('DOMContentLoaded', () => {

  // 1. Header Scroll Effect (ìƒëµ - ì´ì „ ì½”ë“œì™€ ë™ì¼)
  const header = document.querySelector('header');
  window.addEventListener('scroll', () => {
    header.classList.toggle('scrolled', window.scrollY > 50);
  });

  // 2. Parallax Hero Background Effect (ìƒëµ - ì´ì „ ì½”ë“œì™€ ë™ì¼)
  const heroBg = document.getElementById('hero-bg');
  window.addEventListener('scroll', () => {
    const scrollPosition = window.scrollY;
    heroBg.style.transform = `translateY(${scrollPosition * 0.2}px)`;
  });


  // 3. Intersection Observer for Scroll Animation (ìƒëµ - ì´ì „ ì½”ë“œì™€ ë™ì¼)
  const observerOptions = {
    root: null,rootMargin: '0px',threshold: 0.2
  };
  const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('in-view');
      }
    });
  }, observerOptions);
  document.querySelectorAll('.animate-on-scroll').forEach(el => {
    observer.observe(el);
  });


  // 4. 3D Tilt Effect for Cards (ìƒëµ - ì´ì „ ì½”ë“œì™€ ë™ì¼)
  document.querySelectorAll('.card[data-tilt]').forEach(card => {
    const inner = card.querySelector('.card-inner');
    card.addEventListener('mousemove', (e) => {
      const rect = card.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const halfWidth = rect.width / 2;
      const halfHeight = rect.height / 2;
      const rotateX = (y - halfHeight) / halfHeight * 8;
      const rotateY = (x - halfWidth) / halfWidth * -8;
      inner.style.transform = `perspective(1000px) rotateX(${-rotateX}deg) rotateY(${rotateY}deg)`;
    });
    card.addEventListener('mouseleave', () => {
      inner.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg)';
    });
  });


  // 5. Gimmick (Toy) Interaction - ê¸°ëŠ¥ ëŒ€í­ ìˆ˜ì •
  const toyElem = document.getElementById('toy');
  
  // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
  ['click','touchstart'].forEach(evt => toyElem.addEventListener(evt, (e) => {
    e.preventDefault();
    showChoiceBox();
  }));

  function showChoiceBox() {
    // NPCê°€ í™œì„±í™”ëœ ìƒíƒœë¼ë©´ ì„ íƒ ìƒìë¥¼ í‘œì‹œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    if (document.getElementById('npcContainer').classList.contains('active')) return;

    const existing = document.getElementById('choiceBox');
    if (existing) existing.remove();
    
    const box = document.createElement('div');
    box.id = 'choiceBox';
    box.className = 'choiceBox';
    box.innerHTML = `ì–´ë–¤ ì¸í„°ë™ì…˜ íš¨ê³¼ë¥¼ ë³¼ë˜ìš”?<br><br>
      <button id="goreBtn">ğŸ’¥ ê³ ì–´ íš¨ê³¼</button>
      <button id="fartBtn">ğŸ’¨ ì•ˆë°©êµ¬ íš¨ê³¼ (ìŠ¤í† ë¦¬!)</button>
      <button id="fireBtn">ğŸ”¥ ë¶ˆê½ƒ íš¨ê³¼</button>
      <button id="explosionBtn">ğŸ’£ í­ë°œ íš¨ê³¼</button>`;
    document.body.appendChild(box);

    const buttons = ['goreBtn', 'fartBtn', 'fireBtn', 'explosionBtn'];
    buttons.forEach(id => {
      document.getElementById(id).addEventListener('click', () => {
        const type = id.replace('Btn', '');
        box.remove();
        
        if (type === 'fart') {
          startFartQuest(); // ì•ˆë°©êµ¬ í€˜ìŠ¤íŠ¸ ì‹œì‘
        } else {
          triggerSimpleEffect(type); // ë‹¨ìˆœ íš¨ê³¼ ì‹¤í–‰
        }
      });
    });
  }

  // ë‹¨ìˆœ íš¨ê³¼ (ê³ ì–´, ë¶ˆê½ƒ, í­ë°œ)
  function triggerSimpleEffect(type) {
    const maxSplatter = 12;
    let imgUrl = '';
    
    switch(type) {
      case 'fire': imgUrl = 'https://upload.wikimedia.org/wikipedia/commons/3/3b/Fire_icon.png'; break;
      case 'explosion': imgUrl = 'https://upload.wikimedia.org/wikipedia/commons/0/0b/Explosion_icon.png'; break;
      default: imgUrl = 'https://upload.wikimedia.org/wikipedia/commons/2/2e/Blood_drop.png'; // Gore (default)
    }

    for (let i = 0; i < maxSplatter; i++) {
      const fx = document.createElement('div');
      fx.className = 'fx-splatter';
      document.body.appendChild(fx);

      const x = Math.random() * (window.innerWidth - 150);
      const y = Math.random() * (window.innerHeight - 150);
      
      fx.style.left = x + 'px';
      fx.style.top = y + 'px';
      fx.style.backgroundImage = `url('${imgUrl}')`;
      fx.style.opacity = 1;
      
      fx.style.transform = `rotate(${Math.random() * 360}deg) scale(${0.6 + Math.random() * 0.8})`;

      setTimeout(() => {
        fx.style.opacity = 0;
        fx.style.transform += ` translateY(${50 - Math.random() * 100}px)`;
      }, 100);

      setTimeout(() => {
        fx.remove();
      }, 2000);
    }
  }

  // 6. ì•ˆë°©êµ¬ í€˜ìŠ¤íŠ¸ ë¡œì§
  const npcContainer = document.getElementById('npcContainer');
  const npcSpeech = document.getElementById('npcSpeech');
  const npcCharacter = document.getElementById('npcCharacter');
  const fartCloud = document.getElementById('fartCloud');
  let questStep = 0;

  const dialogue = [
    "ì•ˆë…•! ë¬´ìŠ¨ ì¼ ë•Œë¬¸ì— ë‚˜ë¥¼ ì°¾ì•„ì™”ì–´? ë‚˜ëŠ” ì•ˆë°©êµ¬ë¼ê³  í•´.", // Step 0: ì‹œì‘
    "ì•„í•˜, ë„¤ê°€ ë‚˜ì—ê²Œ 'ê¶ê·¹ì˜ ë°©êµ¬'ë¥¼ ìš”êµ¬í•˜ëŠ” ì‚¬ëŒì´êµ¬ë‚˜! ì‚¬ì‹¤ ë‚´ê°€ ìš”ì¦˜ ì¥ì´ ì•ˆ ì¢‹ì•„ì„œ ë§ì´ì•¼...", // Step 1
    "ì§€ê¸ˆì€ í˜ë“¤ì–´... ë‚´ ë¨¸ë¦¬ ìœ„ë¡œ **í´ë¦­**ì„ 3ë²ˆ í•´ì¤˜ì•¼ë§Œ ì—ë„ˆì§€ê°€ ì±„ì›Œì ¸ì„œ ë°©êµ¬ë¥¼ ë€” ìˆ˜ ìˆì„ ê±°ì•¼. ë¶€íƒí•´!", // Step 2: ë¯¸ì…˜ ì œì‹œ
    "ì¢‹ì•„! ì—ë„ˆì§€ê°€ ê°€ë“ ì°¼ì–´! ê·¸ëŸ¼ ì•½ì†ëŒ€ë¡œ...", // Step 3: ë¯¸ì…˜ ì™„ë£Œ
    "í‘¸...í‘¸ì•„ì•„ì•„ì•™! (ëŒ€ë‹¨í•œ ë°©êµ¬ ì†Œë¦¬ê°€ ìš¸ë ¤ í¼ì§„ë‹¤!)", // Step 4: ë°©êµ¬ ì‹¤í–‰
    "ê³ ë§ˆì›Œ! ì´ì œ ë‚˜ëŠ” ë‹¤ì‹œ í‰ë²”í•œ NPCë¡œ ëŒì•„ê°ˆê²Œ. ì¦ê±°ìš´ ì‹œê°„ì´ì—ˆì–´!" // Step 5: ë§ˆë¬´ë¦¬
  ];

  function setDialogue(text) {
    npcSpeech.textContent = text;
  }

  function startFartQuest() {
    npcContainer.classList.add('active');
    questStep = 0;
    setDialogue(dialogue[questStep]);
    
    // ë‹¤ìŒ ëŒ€í™” ì§„í–‰ì„ ìœ„í•´ ìºë¦­í„° í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš©
    npcCharacter.removeEventListener('click', fartQuestHandler);
    npcCharacter.addEventListener('click', fartQuestHandler);
  }

  function fartQuestHandler() {
    questStep++;
    
    if (questStep === 2) {
      // ë¯¸ì…˜ ë‹¨ê³„: í´ë¦­ íšŸìˆ˜ë¥¼ ì„¸ê¸° ìœ„í•´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë³€ê²½
      setDialogue(dialogue[questStep]);
      npcCharacter.removeEventListener('click', fartQuestHandler);
      startClickMission(3); // 3ë²ˆ í´ë¦­ ë¯¸ì…˜ ì‹œì‘
    } else if (questStep < dialogue.length - 1) {
      // ì¼ë°˜ ëŒ€í™” ì§„í–‰
      setDialogue(dialogue[questStep]);
    } else if (questStep === dialogue.length - 1) {
      // ë§ˆë¬´ë¦¬ ëŒ€í™”
      setDialogue(dialogue[questStep]);
      setTimeout(resetFartQuest, 3000);
    }
  }

  function startClickMission(clicksNeeded) {
    let clickCount = 0;
    
    const clickMissionHandler = () => {
      clickCount++;
      npcSpeech.textContent = `ì—ë„ˆì§€ ì¶©ì „ ì¤‘... ${clickCount} / ${clicksNeeded}íšŒ`;

      if (clickCount >= clicksNeeded) {
        npcCharacter.removeEventListener('click', clickMissionHandler); // ë¯¸ì…˜ ì™„ë£Œ
        
        // Step 3 (ë¯¸ì…˜ ì™„ë£Œ ëŒ€í™”)ë¡œ ì´ë™
        questStep = 3;
        setDialogue(dialogue[questStep]);
        
        // 1ì´ˆ í›„ ë°©êµ¬ ì‹¤í–‰
        setTimeout(executeFart, 1000);
      }
    };
    
    npcCharacter.addEventListener('click', clickMissionHandler);
  }

  function executeFart() {
    // Step 4 (ë°©êµ¬ ì‹¤í–‰ ëŒ€í™”)ë¡œ ì´ë™
    questStep = 4;
    setDialogue(dialogue[questStep]);
    
    // ë°©êµ¬ ì‹œê° íš¨ê³¼
    fartCloud.style.left = (npcCharacter.getBoundingClientRect().left + npcCharacter.offsetWidth / 2 - 75) + 'px';
    fartCloud.style.bottom = (npcCharacter.offsetHeight + 10) + 'px';
    fartCloud.classList.add('active');
    
    // 1.5ì´ˆ í›„ ë§ˆë¬´ë¦¬ ëŒ€í™”ë¡œ ì´ë™
    setTimeout(() => {
      fartCloud.classList.remove('active');
      fartQuestHandler(); 
    }, 1500);
  }

  function resetFartQuest() {
    npcContainer.classList.remove('active');
    npcCharacter.removeEventListener('click', fartQuestHandler);
  }
});
</script>

</body>
</html>
```
